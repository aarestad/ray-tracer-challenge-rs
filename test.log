Feature: Intersections
  Scenario: An intersection encapsulates t and object
   ✔  Given s ← sphere()
   ✔  When i ← intersection(3.5, s)
   ✔  Then i.t = 3.5
  Scenario: Precomputing the state of an intersection
   ✔  Given r ← ray(point(0, 0, -5), vector(0, 0, 1))
   ✔  And shape ← sphere()
   ✔  And i ← intersection(4, shape)
   ✔  When comps ← prepare_computations(i, r)
   ✔  Then comps.t = i.t
   ✔  And comps.object = i.object
   ✔  And comps.point = point(0, 0, -1)
   ✔  And comps.eyev = vector(0, 0, -1)
   ✔  And comps.normalv = vector(0, 0, -1)
  Scenario: Precomputing the reflection vector
   ?  Given shape ← plane()
      Step skipped: tests/features/intersections.feature:21:5
  Scenario: The hit, when an intersection occurs on the outside
   ✔  Given r ← ray(point(0, 0, -5), vector(0, 0, 1))
   ✔  And shape ← sphere()
   ✔  And i ← intersection(4, shape)
   ✔  When comps ← prepare_computations(i, r)
   ✘  Then comps.inside = false
      Step failed:
      Defined: tests/features/intersections.feature:32:5
      Matched: testutils/src/givenwhenthen.rs:436:1
      Step panicked. Captured output: bad prop name inside
  Scenario: The hit, when an intersection occurs on the inside
   ✔  Given r ← ray(point(0, 0, 0), vector(0, 0, 1))
   ✔  And shape ← sphere()
   ✔  And i ← intersection(1, shape)
   ✔  When comps ← prepare_computations(i, r)
   ✔  Then comps.point = point(0, 0, 1)
   ✔  And comps.eyev = vector(0, 0, -1)
   ✘  And comps.inside = true
      Step failed:
      Defined: tests/features/intersections.feature:41:5
      Matched: testutils/src/givenwhenthen.rs:436:1
      Step panicked. Captured output: bad prop name inside
  Scenario: The hit should offset the point
   ✔  Given r ← ray(point(0, 0, -5), vector(0, 0, 1))
   ✔  And shape ← sphere() with:
       | transform | translation(0, 0, 1) |
   ✔  And i ← intersection(5, shape)
   ✔  When comps ← prepare_computations(i, r)
   ?  Then comps.over_point.z < -EPSILON/2
      Step skipped: tests/features/intersections.feature:51:5
  Scenario: The under point is offset below the surface
   ✔  Given r ← ray(point(0, 0, -5), vector(0, 0, 1))
   ?  And shape ← glass_sphere() with:
       | transform | translation(0, 0, 1) |
      Step skipped: tests/features/intersections.feature:56:5
  Scenario: Aggregating intersections
   ✔  Given s ← sphere()
   ✔  And i1 ← intersection(1, s)
   ✔  And i2 ← intersection(2, s)
   ✔  When xs ← intersections(i1, i2)
   ✔  Then xs.count = 2
   ✔  And xs[0].t = 1
   ✔  And xs[1].t = 2
  Scenario: The hit, when all intersections have positive t
   ✔  Given s ← sphere()
   ✔  And i1 ← intersection(1, s)
   ✔  And i2 ← intersection(2, s)
   ✔  And xs ← intersections(i2, i1)
   ✔  When i ← hit(xs)
   ✔  Then i = i1
  Scenario: The hit, when some intersections have negative t
   ✔  Given s ← sphere()
   ✔  And i1 ← intersection(-1, s)
   ✔  And i2 ← intersection(1, s)
   ✔  And xs ← intersections(i2, i1)
   ✔  When i ← hit(xs)
   ✔  Then i = i2
  Scenario: The hit, when all intersections have negative t
   ✔  Given s ← sphere()
   ✔  And i1 ← intersection(-2, s)
   ✔  And i2 ← intersection(-1, s)
   ✔  And xs ← intersections(i2, i1)
   ✔  When i ← hit(xs)
   ✔  Then i is nothing
  Scenario: The hit is always the lowest nonnegative intersection
   ✔  Given s ← sphere()
   ✔  And i1 ← intersection(5, s)
   ✔  And i2 ← intersection(7, s)
   ✔  And i3 ← intersection(-3, s)
   ✔  And i4 ← intersection(2, s)
   ✔  And xs ← intersections(i1, i2, i3, i4)
   ✔  When i ← hit(xs)
   ✔  Then i = i4
  Scenario Outline: Finding n1 and n2 at various intersections
   ?  Given A ← glass_sphere() with:
       | transform                 | scaling(2, 2, 2) |
       | material.refractive_index | 1.5              |
      Step skipped: tests/features/intersections.feature:108:5
  Scenario Outline: Finding n1 and n2 at various intersections
   ?  Given A ← glass_sphere() with:
       | transform                 | scaling(2, 2, 2) |
       | material.refractive_index | 1.5              |
      Step skipped: tests/features/intersections.feature:108:5
  Scenario Outline: Finding n1 and n2 at various intersections
   ?  Given A ← glass_sphere() with:
       | transform                 | scaling(2, 2, 2) |
       | material.refractive_index | 1.5              |
      Step skipped: tests/features/intersections.feature:108:5
  Scenario Outline: Finding n1 and n2 at various intersections
   ?  Given A ← glass_sphere() with:
       | transform                 | scaling(2, 2, 2) |
       | material.refractive_index | 1.5              |
      Step skipped: tests/features/intersections.feature:108:5
  Scenario Outline: Finding n1 and n2 at various intersections
   ?  Given A ← glass_sphere() with:
       | transform                 | scaling(2, 2, 2) |
       | material.refractive_index | 1.5              |
      Step skipped: tests/features/intersections.feature:108:5
  Scenario Outline: Finding n1 and n2 at various intersections
   ?  Given A ← glass_sphere() with:
       | transform                 | scaling(2, 2, 2) |
       | material.refractive_index | 1.5              |
      Step skipped: tests/features/intersections.feature:108:5
  Scenario: The Schlick approximation under total internal reflection
   ?  Given shape ← glass_sphere()
      Step skipped: tests/features/intersections.feature:133:5
  Scenario: The Schlick approximation with a perpendicular viewing angle
   ?  Given shape ← glass_sphere()
      Step skipped: tests/features/intersections.feature:141:5
  Scenario: The Schlick approximation with small angle and n2 > n1
   ?  Given shape ← glass_sphere()
      Step skipped: tests/features/intersections.feature:149:5
  Scenario: An intersection can encapsulate `u` and `v`
   ?  Given s ← triangle(point(0, 1, 0), point(-1, 0, 0), point(1, 0, 0))
      Step skipped: tests/features/intersections.feature:157:5
[Summary]
1 feature
22 scenarios (7 passed, 13 skipped, 2 failed)
75 steps (60 passed, 13 skipped, 2 failed)
